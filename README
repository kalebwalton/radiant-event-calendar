INSTALLATION 

1. Migrate: rake db:migrate:extensions
2. From Admin navigate to your new "Event Calendars" tab and click "Add a subscription"
3. Now in the "New iCal Subscription" form fill-in the name, *category and *name and iCal subscription URL

* The extension currently overrides the handling of all paths below the node where the Event Calendar Page type gets applied looking for a calendar "group" and then a "name". So if you create a page under Root > Calendar and apply the EventCalendar page type to it, then through admin create a calendar with the group of "master" and a name of "youth" you'll be able to access your calendar at http://yoursite.com/calendar/master/youth. You'll also be able to see events for all calendars with a group of "master" by navigating to http://yoursite.com/calendar/master/all.
  
4. Study the tags and display on page
5. Setup cron job for "script/runner 'refresh_events.rb'"
6. Monitor refreshing in Admin panel

+ rake task to create "public/assets/calendars/Test.ics"
+ add Radiant::Config params for ical_paths and event_calendar_root_node
+ make grouping optional
+ ical file link tag
+ tests for: ical calendar receive, parsing, reoccurance parsing confirmation
+ script/runner task and cron job instructions



AN EXAMPLE EVENT-CALENDAR IMPLEMENTATION

<r:calendar>
<div id="calendarNav">
<table>
<tr>
  <td class="h3">
        <r:calendar:nav:week_link class="navLink" /> | 
        <r:calendar:nav:month_link class="navLink" /> | 
        <r:calendar:nav:year_link class="navLink" /> 
  </td>
<r:if_request_uri matches="^/calendars/parish">
  <td style="text-align:right;" class="h3">
      <a style="margin-right:0px;" class="navLink" href="/parish-events/submit">submit event</a> 
  </td>
</r:if_request_uri>
</tr>
<tr style="display:none;">
  <td colspan="2">
    <h3><span style="text-transform:uppercase;"><r:name /></span> | <span style="margin-right:0px;"><r:begin_date format="%d %B" /> - <r:end_date format="%d %B" /></span></h3>
  </td>
</tr>
</table>
</div>
<div id="eventList">
 <r:event:each>
    <div class="eventBox">
    <r:header><h5><r:start format="%d %B, %A" /></h5></r:header>
    <table class="event" id="event<r:id />" onclick="toggleVisible('detail<r:id />'); Effect.Highlight('event<r:id />'); return false;">
      <tr>
        <td style="text-transform:uppercase;width:180px;">
          <r:calendar_name />
        </td>
        <td style="">
          <r:title />
        </td>
     </tr>
     <tr>
        <td style="text-transform:uppercase;width:180px;">
        </td>
        <td>
         <div id="detail<r:id />" class="detail">
           <r:timeperiod format="%I:%M %p" /><br />
           <r:location /><br />
           <r:description />
         </div>
       </td>
     </tr>
   </table>
   </div>
  </r:event:each>
</div>
</r:calendar>











class EventCalendar < Page

  # register "Event Calendar"

  LOGGER = ActionController::Base.logger

  description %{ 
    Create a series of calendar pages.   
  }

  def find_page_by_url(url, live = true, clean = false)
    self
  end

  def cache_page?
    false
  end
    
  # def page_virtual?
  #   true
  # end

end




# URI parameters evaluated first, then overwritten by any tag.attribs...

# tag.locals.calendars_segement = params[2] unless params[2].nil?
# tag.locals.calendars = URI.unescape(params[2]) unless params[2].nil?
# tag.locals.period = params[3] unless params[3].nil?
# tag.locals.period_amount = params[4] unless params[4].nil?

# begin
# if tag.locals.events.count > 0 
#   tag.expand
# else
#   "No events found."
# end
# rescue
#   "Problem in calendar request."
# end




The extension currently overrides the handling of all paths below the node where the Event Calendar Page type gets applied looking for a calendar "group" and then a "name". So if you create a page under Root > Calendar and apply the EventCalendar page type to it, then through admin create a calendar with the group of "master" and a name of "youth" you'll be able to access your calendar at http://yoursite.com/calendar/master/youth. You'll also be able to see events for all calendars with a group of "master" by navigating to http://yoursite.com/calendar/master/all.
